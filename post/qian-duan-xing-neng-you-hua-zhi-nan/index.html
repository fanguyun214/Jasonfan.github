<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡å— | Jasonfan Blog</title>

<link rel="shortcut icon" href="https://fanguyun214.github.io/favicon.ico?v=1616378338621">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://fanguyun214.github.io/styles/main.css">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<style>
    hr {
        margin-top: 1rem;
        margin-bottom: 1rem;
        border: 0;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <style>
    /* å¯¼èˆªæ æ ·å¼ */
    .navbar {
        position: relative;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-flex-align: center;
        align-items: center;
        -ms-flex-pack: justify;
        justify-content: space-between;
        padding: 0.5rem 1rem;
    }

    .navbar-brand {
        display: inline-block;
        padding-top: 0.3125rem;
        padding-bottom: 0.3125rem;
        margin-right: 1rem;
        font-size: 1.25rem;
        line-height: inherit;
        white-space: nowrap;
    }

    .navbar-brand:hover,
    .navbar-brand:focus {
        text-decoration: none;
    }

    .navbar-nav {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        padding-left: 0;
        margin-bottom: 0;
        list-style: none;
    }

    .navbar-collapse {
        -ms-flex-preferred-size: 100%;
        flex-basis: 100%;
        -ms-flex-positive: 1;
        flex-grow: 1;
        -ms-flex-align: center;
        align-items: center;
    }

    .navbar-toggler {
        padding: 0.25rem 0.75rem;
        font-size: 1.25rem;
        line-height: 1;
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: 0.25rem;
    }

    .navbar-toggler:hover,
    .navbar-toggler:focus {
        text-decoration: none;
    }

    @media (min-width: 992px) {
        .navbar-expand-lg {
            -ms-flex-flow: row nowrap;
            flex-flow: row nowrap;
            -ms-flex-pack: start;
            justify-content: flex-start;
        }

        .navbar-expand-lg .navbar-nav {
            -ms-flex-direction: row;
            flex-direction: row;
        }

        .navbar-expand-lg .navbar-collapse {
            display: -ms-flexbox !important;
            display: flex !important;
            -ms-flex-preferred-size: auto;
            flex-basis: auto;
        }

        .navbar-expand-lg .navbar-toggler {
            display: none;
        }
    }

    @media (max-width: 991px) {
        #navbarSupportedContent {
            display: none;
        }
    }
</style>
<nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            Jasonfan Blog
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/post/about" class="menu gt-a-link">
                    å…³äº
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1616378338621"
                action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = function () {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡å—
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2020-07-24 Â·
                    </time>
                    
                </div>
                <div class="post-content">
                    <p>æ€§èƒ½ä¼˜åŒ–ä¸€ç›´ä»¥æ¥éƒ½æ˜¯å‰ç«¯å·¥ç¨‹é¢†åŸŸä¸­çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚ç½‘ç«™åº”ç”¨çš„æ€§èƒ½ï¼ˆåŠ è½½é€Ÿåº¦ã€äº¤äº’æµç•…åº¦ï¼‰ä¼˜åŒ–å¯¹äºæé«˜ç”¨æˆ·ç•™å­˜ã€è½¬åŒ–ç‡ç­‰éƒ½æœ‰ç§¯æå½±å“ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œæå‡ä½ çš„ç½‘ç«™æ€§èƒ½ï¼Œå°±æ˜¯æå‡ä½ çš„ä¸šåŠ¡æ•°æ®ï¼ˆç”šè‡³æ˜¯ä¸šåŠ¡æ”¶å…¥ï¼‰ã€‚</p>
<!-- more -->
<p>æ€§èƒ½ä¼˜åŒ–å¹¿ä¹‰ä¸Šä¼šåŒ…å«å‰ç«¯ä¼˜åŒ–å’Œåç«¯ä¼˜åŒ–ã€‚åç«¯ä¼˜åŒ–çš„å…³æ³¨ç‚¹æ›´å¤šçš„æ—¶å€™æ˜¯åœ¨å¢åŠ èµ„æºåˆ©ç”¨ç‡ã€é™ä½èµ„æºæˆæœ¬ä»¥åŠæé«˜ç¨³å®šæ€§ä¸Šã€‚ç›¸è¾ƒäºåç«¯ï¼Œå‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–ä¼šæ›´ç›´æ¥ä¸ç”¨æˆ·çš„ä½“éªŒæŒ‚é’©ã€‚ä»ç”¨æˆ·ä½“éªŒä¾§æ¥è¯´ï¼Œå‰ç«¯æœåŠ¡ 5s çš„åŠ è½½æ—¶é—´ä¼˜åŒ–ç¼©å‡ 80%(1s) ä¸åç«¯æœåŠ¡ 50ms çš„å“åº”ä¼˜åŒ–ç¼©å‡ 80%(10ms) ç›¸æ¯”ï¼Œç”¨æˆ·çš„ä½“éªŒæå‡ä¼šæ›´å¤§ã€‚å› æ­¤å¾ˆå¤šæ—¶å€™ï¼Œä¸ä½“éªŒç›¸å…³çš„æ€§èƒ½çš„ç“¶é¢ˆä¼šå‡ºç°åœ¨å‰ç«¯ã€‚</p>
<h3 id="ç›®çš„">ç›®çš„</h3>
<ul>
<li>
<p>è®©é¡µé¢åŠ è½½çš„æ›´å¿«</p>
</li>
<li>
<p>å¯¹ç”¨æˆ·æ“ä½œå“åº”æ›´åŠæ—¶ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½¿ç”¨ä½“éªŒ</p>
</li>
<li>
<p>å‡å°‘è¯·æ±‚ï¼Œé™ä½æœåŠ¡å™¨è´Ÿè·ï¼ŒèŠ‚çœèµ„æº</p>
</li>
</ul>
<h3 id="åŸåˆ™">åŸåˆ™</h3>
<ul>
<li>
<p>å»ºç«‹æ€§èƒ½ä¼˜åŒ–æ„è¯†</p>
</li>
<li>
<p>ç›®æ ‡ï¼šæ¯”ä½ æœ€å¿«çš„ç«äº‰å¯¹æ‰‹å¿«è‡³å°‘20%</p>
</li>
<li>
<p>é€‰æ‹©æ­£ç¡®çš„æŒ‡æ ‡</p>
</li>
<li>
<p>ä»å…·æœ‰ä»£è¡¨æ€§çš„ç”¨æˆ·ä½¿ç”¨çš„è®¾å¤‡æ”¶é›†æ•°æ®</p>
</li>
<li>
<p>æ·±å…¥ç†è§£ä¸šåŠ¡</p>
</li>
</ul>
<h3 id="å¦‚ä½•è¡¡é‡">å¦‚ä½•è¡¡é‡</h3>
<pre><code>ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æŒ‡æ ‡ï¼š
</code></pre>
<p>â€‹		1ã€å“ªäº›æŒ‡æ ‡èƒ½å¤Ÿæœ€å‡†ç¡®çš„è¡¡é‡ç”¨æˆ·æ‰€æ„Ÿå—åˆ°çš„æ€§èƒ½ï¼Ÿ</p>
<p>â€‹		2ã€å¦‚ä½•é’ˆå¯¹å®é™…ç”¨æˆ·æ¥è¡¡é‡è¿™äº›æŒ‡æ ‡ï¼Ÿ</p>
<p>â€‹		3ã€å¦‚ä½•è§£è¯»è¡¡é‡ç»“æœä»¥ç¡®å®šåº”ç”¨æ˜¯å¦é€Ÿåº¦å¿«ï¼Ÿ</p>
<p>â€‹		4ã€äº†è§£åº”ç”¨çš„å®é™…ç”¨æˆ·æ€§èƒ½ä¹‹åï¼Œå¦‚ä½•é¿å…æ€§èƒ½ä¸‹é™å¹¶åœ¨æœªæ¥æé«˜æ€§èƒ½ï¼Ÿ</p>
<h3 id="åŸºæœ¬æ¦‚è¿°é›…è™å‰ç«¯ä¼˜åŒ–35æ¡">åŸºæœ¬æ¦‚è¿°ï¼ˆé›…è™å‰ç«¯ä¼˜åŒ–35æ¡ï¼‰</h3>
<h4 id="å†…å®¹">å†…å®¹</h4>
<p>1ã€å°½é‡å‡å°‘HTTPè¯·æ±‚æ•°</p>
<p>80%çš„ç»ˆç«¯ç”¨æˆ·å“åº”æ—¶é—´éƒ½èŠ±åœ¨äº†å‰ç«¯ä¸Šï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ä¸‹è½½é¡µé¢ä¸Šçš„å„ç§ç»„ä»¶ï¼šå›¾ç‰‡ï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ç­‰ç­‰ã€‚å‡å°‘ç»„ä»¶æ•°å¿…ç„¶èƒ½å¤Ÿå‡å°‘é¡µé¢æäº¤çš„HTTPè¯·æ±‚æ•°ï¼Œè¿™æ˜¯è®©é¡µé¢æ›´å¿«çš„å…³é”®ã€‚</p>
<p><strong>åˆå¹¶æ–‡ä»¶</strong>æ˜¯é€šè¿‡æŠŠæ‰€æœ‰è„šæœ¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­çš„æ–¹å¼æ¥å‡å°‘è¯·æ±‚æ•°çš„ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥åˆå¹¶æ‰€æœ‰çš„CSSã€‚</p>
<p>2ã€å‡å°‘DNSæŸ¥æ‰¾</p>
<p>3ã€é¿å…é‡å®šå‘</p>
<p>4ã€è®©Ajaxå¯ç¼“å­˜</p>
<p>5ã€å»¶è¿ŸåŠ è½½</p>
<p>6ã€é¢„åŠ è½½</p>
<p>7ã€å‡å°‘DOMå…ƒç´ æ•°é‡</p>
<p>8ã€åˆ’åˆ†åˆ°ä¸åŒåŸŸå</p>
<p>9ã€å°½é‡å‡å°‘Iframeçš„ä½¿ç”¨</p>
<p>10ã€é¿å…404é”™è¯¯</p>
<h4 id="æœåŠ¡å™¨">æœåŠ¡å™¨</h4>
<p>1ã€ä½¿ç”¨CDN</p>
<p>2ã€æ·»åŠ Expiresæˆ–Cache-Controlå“åº”å¤´ï¼Œä½¿ç”¨ç¼“å­˜</p>
<p>3ã€å¯ç”¨Gzip</p>
<p>4ã€é…ç½®Etag</p>
<p>5ã€å°½æ—©è¾“å‡ºç¼“å­˜</p>
<p>6ã€Ajaxè¯·æ±‚ä½¿ç”¨Get</p>
<p>7ã€é¿å…srcã€hrefä¸ºç©º</p>
<h4 id="cookie">Cookie</h4>
<p>1ã€å‡å°‘cookieä½¿ç”¨</p>
<p>2ã€é™æ€èµ„æºä½¿ç”¨æ— cookieåŸŸå</p>
<h4 id="css">CSS</h4>
<p>1ã€æŠŠæ ·å¼è¡¨æ”¾åœ¨headä¸­</p>
<p>2ã€ä¸è¦ä½¿ç”¨CSSè¡¨è¾¾å¼</p>
<p>3ã€ä½¿ç”¨<link>ä»£æ›¿@import</p>
<p>4ã€ä¸è¦ä½¿ç”¨filter(å·²åºŸå¼ƒï¼Œå¯ç”¨æ¥è§£å†³IEè€ç‰ˆæœ¬pngèƒŒæ™¯é€æ˜é—®é¢˜)</p>
<h4 id="javascript">Javascript</h4>
<p>1ã€è„šæœ¬æ”¾åœ¨é¡µé¢åº•éƒ¨</p>
<p>2ã€ä½¿ç”¨å¤–éƒ¨JSå’ŒCSS</p>
<p>3ã€å‹ç¼©JSå’ŒCSS</p>
<p>4ã€ç§»é™¤é‡å¤è„šæœ¬</p>
<p>5ã€å‡å°‘DOMæ“ä½œ</p>
<p>6ã€ä½¿ç”¨é«˜æ•ˆçš„äº‹ä»¶å¤„ç†</p>
<h4 id="å›¾ç‰‡">å›¾ç‰‡</h4>
<p>1ã€ä¼˜åŒ–å›¾ç‰‡</p>
<p>2ã€ä½¿ç”¨CSS Sprite</p>
<p>3ã€ä¸è¦åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡</p>
<p>4ã€ä½¿ç”¨ä½“ç§¯å°ã€å¯ç¼“å­˜çš„favicon.ico</p>
<h4 id="ç§»åŠ¨ç«¯">ç§»åŠ¨ç«¯</h4>
<p>1ã€ä¿è¯æ‰€æœ‰ç»„ä»¶å°äº25K</p>
<p>2ã€æ‰“åŒ…å†…å®¹ä¸ºåˆ†æ®µï¼ˆmultipartï¼‰æ–‡æ¡£</p>
<h3 id="æ€§èƒ½æ•°æ®é‡‡é›†ç›‘æ§">æ€§èƒ½æ•°æ®é‡‡é›†/ç›‘æ§</h3>
<h4 id="w3c-navigation-timing-apiçš„æ€§èƒ½æŒ‡æ ‡">W3C Navigation Timing APIçš„æ€§èƒ½æŒ‡æ ‡</h4>
<p>W3Cæ€§èƒ½å°ç»„å¼•å…¥äº† Navigation Timing API ï¼Œå®ç°äº†è‡ªåŠ¨ã€ç²¾å‡†çš„é¡µé¢æ€§èƒ½æ‰“ç‚¹ï¼›å¼€å‘è€…å¯ä»¥é€šè¿‡ <code>window.performance</code> å±æ€§è·å–ã€‚</p>
<ul>
<li><code>performance.timing</code> æ¥å£ï¼ˆå®šä¹‰äº†ä» <code>navigationStart</code> è‡³ <code>loadEventEnd</code> çš„ 21 ä¸ªåªè¯»å±æ€§ï¼‰</li>
<li><code>performance.navigation</code>ï¼ˆå®šä¹‰äº†å½“å‰æ–‡æ¡£çš„å¯¼èˆªä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯é‡è½½è¿˜æ˜¯å‘å‰å‘åç­‰ï¼‰</li>
</ul>
<p>W3C Navigation Timing V2å¤„ç†æ¨¡å‹å›¾:</p>
<figure data-type="image" tabindex="1"><img src="http://raw.githubusercontent.com/fanguyun214/picgo/master/img/timestamp-diagram.svg" alt="" loading="lazy"></figure>
<p>ä»å½“å‰æµè§ˆå™¨çª—å£å¸è½½æ—§é¡µé¢å¼€å§‹ï¼Œåˆ°æ–°é¡µé¢åŠ è½½å®Œæˆï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸€å…±è¢«åˆ‡åˆ†ä¸º 9 ä¸ªå°å—ï¼šæç¤ºå¸è½½æ—§æ–‡æ¡£ã€é‡å®šå‘/å¸è½½ã€åº”ç”¨ç¼“å­˜ã€DNS è§£æã€TCP æ¡æ‰‹ã€HTTP è¯·æ±‚å¤„ç†ã€HTTP å“åº”å¤„ç†ã€DOM å¤„ç†ã€æ–‡æ¡£è£…è½½å®Œæˆã€‚æ¯ä¸ªå°å—çš„é¦–å°¾ã€ä¸­é—´åšäº‹ä»¶åˆ†ç•Œï¼Œå– Unix æ—¶é—´æˆ³ï¼Œä¸¤ä¸¤äº‹ä»¶ä¹‹é—´è®¡ç®—æ—¶é—´å·®ï¼Œä»è€Œè·å–ä¸­é—´è¿‡ç¨‹çš„è€—æ—¶ï¼ˆç²¾ç¡®åˆ°æ¯«ç§’çº§åˆ«ï¼‰ã€‚</p>
<h5 id="æŒ‡æ ‡è§£è¯»">æŒ‡æ ‡è§£è¯»:</h5>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>navigationStart</td>
<td>å½“å‰æµè§ˆå™¨çª—å£çš„å‰ä¸€ä¸ªç½‘é¡µå…³é—­ï¼Œå‘ç”Ÿunloadäº‹ä»¶æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªç½‘é¡µï¼Œåˆ™ç­‰äºfetchStartå±æ€§</td>
</tr>
<tr>
<td>unloadEventStart</td>
<td>å¦‚æœå‰ä¸€ä¸ªç½‘é¡µä¸å½“å‰ç½‘é¡µå±äºåŒä¸€ä¸ªåŸŸåï¼Œåˆ™è¿”å›å‰ä¸€ä¸ªç½‘é¡µçš„unloadäº‹ä»¶å‘ç”Ÿæ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªç½‘é¡µï¼Œæˆ–è€…ä¹‹å‰çš„ç½‘é¡µè·³è½¬ä¸æ˜¯åœ¨åŒä¸€ä¸ªåŸŸåå†…ï¼Œåˆ™è¿”å›å€¼ä¸º0</td>
</tr>
<tr>
<td>unloadEventEnd</td>
<td>å¦‚æœå‰ä¸€ä¸ªç½‘é¡µä¸å½“å‰ç½‘é¡µå±äºåŒä¸€ä¸ªåŸŸåï¼Œåˆ™è¿”å›å‰ä¸€ä¸ªç½‘é¡µunloadäº‹ä»¶çš„å›è°ƒå‡½æ•°ç»“æŸæ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªç½‘é¡µï¼Œæˆ–è€…ä¹‹å‰çš„ç½‘é¡µè·³è½¬ä¸æ˜¯åœ¨åŒä¸€ä¸ªåŸŸåå†…ï¼Œåˆ™è¿”å›å€¼ä¸º0</td>
</tr>
<tr>
<td>redirectStart</td>
<td>è¿”å›ç¬¬ä¸€ä¸ªHTTPè·³è½¬å¼€å§‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰è·³è½¬ï¼Œæˆ–è€…ä¸æ˜¯åŒä¸€ä¸ªåŸŸåå†…éƒ¨çš„è·³è½¬ï¼Œåˆ™è¿”å›å€¼ä¸º0</td>
</tr>
<tr>
<td>redirectEnd</td>
<td>è¿”å›æœ€åä¸€ä¸ªHTTPè·³è½¬ç»“æŸæ—¶ï¼ˆå³è·³è½¬å›åº”çš„æœ€åä¸€ä¸ªå­—èŠ‚æ¥å—å®Œæˆæ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰è·³è½¬ï¼Œæˆ–è€…ä¸æ˜¯åŒä¸€ä¸ªåŸŸåå†…éƒ¨çš„è·³è½¬ï¼Œåˆ™è¿”å›å€¼ä¸º0</td>
</tr>
<tr>
<td>fetchStart</td>
<td>è¿”å›æµè§ˆå™¨å‡†å¤‡ä½¿ç”¨HTTPè¯·æ±‚è¯»å–æ–‡æ¡£æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚è¯¥äº‹ä»¶åœ¨ç½‘é¡µæŸ¥è¯¢æœ¬åœ°ç¼“å­˜ä¹‹å‰å‘ç”Ÿ</td>
</tr>
<tr>
<td>domainLookupStart</td>
<td>è¿”å›åŸŸåæŸ¥è¯¢å¼€å§‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨æŒä¹…è¿æ¥ï¼Œæˆ–è€…ä¿¡æ¯æ˜¯ä»æœ¬åœ°ç¼“å­˜è·å–çš„ï¼Œåˆ™è¿”å›å€¼ç­‰åŒäºfetchStartå±æ€§çš„å€¼</td>
</tr>
<tr>
<td>domainLookupEnd</td>
<td>è¿”å›åŸŸåæŸ¥è¯¢ç»“æŸæ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨æŒä¹…è¿æ¥ï¼Œæˆ–è€…ä¿¡æ¯æ˜¯ä»æœ¬åœ°ç¼“å­˜è·å–çš„ï¼Œåˆ™è¿”å›å€¼ç­‰åŒäºfetchStartå±æ€§çš„å€¼</td>
</tr>
<tr>
<td>connectStart</td>
<td>è¿”å›HTTPè¯·æ±‚å¼€å§‹å‘æœåŠ¡å™¨å‘é€æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨æŒä¹…è¿æ¥ï¼ˆpersistent connectionï¼‰ï¼Œåˆ™è¿”å›å€¼ç­‰åŒäºfetchStartå±æ€§çš„å€¼</td>
</tr>
<tr>
<td>connectEnd</td>
<td>è¿”å›æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥å»ºç«‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœå»ºç«‹çš„æ˜¯æŒä¹…è¿æ¥ï¼Œåˆ™è¿”å›å€¼ç­‰åŒäºfetchStartå±æ€§çš„å€¼ã€‚è¿æ¥å»ºç«‹æŒ‡çš„æ˜¯æ‰€æœ‰æ¡æ‰‹å’Œè®¤è¯è¿‡ç¨‹å…¨éƒ¨ç»“æŸ</td>
</tr>
<tr>
<td>secureConnectionStart</td>
<td>è¿”å›æµè§ˆå™¨ä¸æœåŠ¡å™¨å¼€å§‹å®‰å…¨é“¾æ¥çš„æ¡æ‰‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœå½“å‰ç½‘é¡µä¸è¦æ±‚å®‰å…¨è¿æ¥ï¼Œåˆ™è¿”å›0</td>
</tr>
<tr>
<td>requestStart</td>
<td>è¿”å›æµè§ˆå™¨å‘æœåŠ¡å™¨å‘å‡ºHTTPè¯·æ±‚æ—¶ï¼ˆæˆ–å¼€å§‹è¯»å–æœ¬åœ°ç¼“å­˜æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>responseStart</td>
<td>è¿”å›æµè§ˆå™¨ä»æœåŠ¡å™¨æ”¶åˆ°ï¼ˆæˆ–ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼‰ç¬¬ä¸€ä¸ªå­—èŠ‚æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>responseEnd</td>
<td>è¿”å›æµè§ˆå™¨ä»æœåŠ¡å™¨æ”¶åˆ°ï¼ˆæˆ–ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼‰æœ€åä¸€ä¸ªå­—èŠ‚æ—¶ï¼ˆå¦‚æœåœ¨æ­¤ä¹‹å‰HTTPè¿æ¥å·²ç»å…³é—­ï¼Œåˆ™è¿”å›å…³é—­æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>domLoading</td>
<td>è¿”å›å½“å‰ç½‘é¡µDOMç»“æ„å¼€å§‹è§£ææ—¶ï¼ˆå³Document.readyStateå±æ€§å˜ä¸ºâ€œloadingâ€ã€ç›¸åº”çš„readystatechangeäº‹ä»¶è§¦å‘æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>domInteractive</td>
<td>è¿”å›å½“å‰ç½‘é¡µDOMç»“æ„ç»“æŸè§£æã€å¼€å§‹åŠ è½½å†…åµŒèµ„æºæ—¶ï¼ˆå³Document.readyStateå±æ€§å˜ä¸ºâ€œinteractiveâ€ã€ç›¸åº”çš„readystatechangeäº‹ä»¶è§¦å‘æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>domContentLoadedEventStart</td>
<td>è¿”å›å½“å‰ç½‘é¡µDOMContentLoadedäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå³DOMç»“æ„è§£æå®Œæ¯•ã€æ‰€æœ‰è„šæœ¬å¼€å§‹è¿è¡Œæ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>domContentLoadedEventEnd</td>
<td>è¿”å›å½“å‰ç½‘é¡µæ‰€æœ‰éœ€è¦æ‰§è¡Œçš„è„šæœ¬æ‰§è¡Œå®Œæˆæ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>domComplete</td>
<td>è¿”å›å½“å‰ç½‘é¡µDOMç»“æ„ç”Ÿæˆæ—¶ï¼ˆå³Document.readyStateå±æ€§å˜ä¸ºâ€œcompleteâ€ï¼Œä»¥åŠç›¸åº”çš„readystatechangeäº‹ä»¶å‘ç”Ÿæ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>loadEventStart</td>
<td>è¿”å›å½“å‰ç½‘é¡µloadäº‹ä»¶çš„å›è°ƒå‡½æ•°å¼€å§‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœè¯¥äº‹ä»¶è¿˜æ²¡æœ‰å‘ç”Ÿï¼Œè¿”å›0</td>
</tr>
<tr>
<td>loadEventEnd</td>
<td>è¿”å›å½“å‰ç½‘é¡µloadäº‹ä»¶çš„å›è°ƒå‡½æ•°è¿è¡Œç»“æŸæ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœè¯¥äº‹ä»¶è¿˜æ²¡æœ‰å‘ç”Ÿï¼Œè¿”å›0</td>
</tr>
</tbody>
</table>
<h5 id="å…³é”®æ€§èƒ½æŒ‡æ ‡">å…³é”®æ€§èƒ½æŒ‡æ ‡</h5>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>æè¿°</th>
<th>è®¡ç®—å…¬å¼</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>First Meaningful Paint (FMP)</td>
<td>é¦–å±æ—¶é—´</td>
<td>æ— </td>
<td>æ— </td>
</tr>
<tr>
<td>fpt</td>
<td>First Paint Timeï¼Œé¦–æ¬¡æ¸²æŸ“æ—¶é—´ï¼ˆç™½å±æ—¶é—´ï¼‰</td>
<td>responseEnd - fetchStart</td>
<td>ä»è¯·æ±‚å¼€å§‹åˆ°æµè§ˆå™¨å¼€å§‹è§£æç¬¬ä¸€æ‰¹HTMLæ–‡æ¡£å­—èŠ‚çš„æ—¶é—´å·®</td>
</tr>
<tr>
<td>tti</td>
<td>Time to Interactï¼Œé¦–æ¬¡å¯äº¤äº’æ—¶é—´</td>
<td>domInteractive - fetchStart</td>
<td>æµè§ˆå™¨å®Œæˆæ‰€æœ‰HTMLè§£æå¹¶ä¸”å®ŒæˆDOMæ„å»ºï¼Œæ­¤æ—¶æµè§ˆå™¨å¼€å§‹åŠ è½½èµ„æº</td>
</tr>
<tr>
<td>ready</td>
<td>HTMLåŠ è½½å®Œæˆæ—¶é—´ï¼Œ å³DOM Readyæ—¶é—´</td>
<td>domContentLoadEventEnd - fetchStart</td>
<td>å¦‚æœé¡µé¢æœ‰åŒæ­¥æ‰§è¡Œçš„JSï¼Œåˆ™åŒæ­¥JSæ‰§è¡Œæ—¶é—´ = ready - tti</td>
</tr>
<tr>
<td>load</td>
<td>é¡µé¢å®Œå…¨åŠ è½½æ—¶é—´</td>
<td>loadEventStart - fetchStart</td>
<td>load = é¦–æ¬¡æ¸²æŸ“æ—¶é—´ + DOMè§£æè€—æ—¶ + åŒæ­¥JSæ‰§è¡Œ + èµ„æºåŠ è½½è€—æ—¶</td>
</tr>
<tr>
<td>firstbyte</td>
<td>é¦–åŒ…æ—¶é—´</td>
<td>responseStart - domainLookupStart</td>
<td>æ— </td>
</tr>
</tbody>
</table>
<h5 id="åŒºé—´æ®µè€—æ—¶">åŒºé—´æ®µè€—æ—¶</h5>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>æè¿°</th>
<th>è®¡ç®—å…¬å¼</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>dns</td>
<td>DNSæŸ¥è¯¢è€—æ—¶</td>
<td>domainLookupEnd - domainLookupStart</td>
<td>æ— </td>
</tr>
<tr>
<td>tcp</td>
<td>TCPè¿æ¥è€—æ—¶</td>
<td>connectEnd - connectStart</td>
<td>æ— </td>
</tr>
<tr>
<td>ttfb</td>
<td>Time to First Byteï¼ˆTTFBï¼‰ï¼Œè¯·æ±‚å“åº”è€—æ—¶ã€‚</td>
<td>responseStart - requestStart</td>
<td>TTFBæœ‰å¤šç§è®¡ç®—æ–¹å¼</td>
</tr>
<tr>
<td>trans</td>
<td>å†…å®¹ä¼ è¾“è€—æ—¶</td>
<td>responseEnd - responseStart</td>
<td>æ— </td>
</tr>
<tr>
<td>dom</td>
<td>DOMè§£æè€—æ—¶</td>
<td>domInteractive - responseEnd</td>
<td>æ— </td>
</tr>
<tr>
<td>res</td>
<td>èµ„æºåŠ è½½è€—æ—¶</td>
<td>loadEventStart - domContentLoadedEventEnd</td>
<td>è¡¨ç¤ºé¡µé¢ä¸­çš„åŒæ­¥åŠ è½½èµ„æº</td>
</tr>
<tr>
<td>ssl</td>
<td>SSLå®‰å…¨è¿æ¥è€—æ—¶</td>
<td>connectEnd - secureConnectionStart</td>
<td>åªåœ¨HTTPSä¸‹æœ‰æ•ˆ</td>
</tr>
</tbody>
</table>
<h5 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</h5>
<ul>
<li>
<p>é€šè¿‡window.performance.timingæ‰€è·çš„çš„é¡µé¢æ¸²æŸ“æ‰€ç›¸å…³çš„æ•°æ®ï¼Œåœ¨å•é¡µåº”ç”¨ä¸­æ”¹å˜äº†urlä½†ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹æ˜¯ä¸ä¼šæ›´æ–°çš„ã€‚å› æ­¤å¦‚æœä»…ä»…é€šè¿‡è¯¥apiæ˜¯æ— æ³•è·å¾—æ¯ä¸€ä¸ªå­è·¯ç”±æ‰€å¯¹åº”çš„é¡µé¢æ¸²æŸ“çš„æ—¶é—´ã€‚å¦‚æœéœ€è¦ä¸ŠæŠ¥åˆ‡æ¢è·¯ç”±æƒ…å†µä¸‹æ¯ä¸€ä¸ªå­é¡µé¢é‡æ–°renderçš„æ—¶é—´ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸ŠæŠ¥ã€‚</p>
</li>
<li>
<p>é€šè¿‡window.performance.getEntries()æ‰€è·å–çš„èµ„æºåŠ è½½å’Œå¼‚æ­¥è¯·æ±‚æ‰€ç›¸å…³çš„æ•°æ®ï¼Œåœ¨é¡µé¢åˆ‡æ¢è·¯ç”±çš„æ—¶å€™ä¼šé‡æ–°çš„è®¡ç®—ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨çš„ä¸ŠæŠ¥ã€‚</p>
</li>
</ul>
<h4 id="spaæ¨¡å¼">SPAæ¨¡å¼</h4>
<p>Navigation Timing APIå¯ä»¥ç›‘æ§å¤§éƒ¨åˆ†å‰ç«¯é¡µé¢çš„æ€§èƒ½ã€‚ä½†éšç€SPAæ¨¡å¼çš„ç››è¡Œï¼Œç±»ä¼¼Angular/Reac/Vuetç­‰æ¡†æ¶çš„æ™®åŠï¼Œé¡µé¢å†…å®¹æ¸²æŸ“çš„æ—¶æœºè¢«æ”¹å˜äº†ï¼ŒW3Cæ ‡å‡†æ— æ³•å®Œå…¨æ»¡è¶³åŸæ¥çš„ç›‘æ§æ„ä¹‰ã€‚ä»¥Chromeä¸ºé¦–çš„æµè§ˆå™¨ä¸€ç›´åœ¨æ¨åŠ¨ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¹¶ä¸”é€æ­¥å¼€æ”¾APIã€‚å¦‚lighthouseï¼ŒWeb Vitalsç­‰æä¾›æµè§ˆå™¨æ’ä»¶/å‘½ä»¤è¡Œå·¥å…·/NPMåŒ…ã€‚</p>
<h5 id="å…³æ³¨ç‚¹">å…³æ³¨ç‚¹</h5>
<table>
<thead>
<tr>
<th>ä½“éªŒ</th>
<th>æŒ‡æ ‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ˜¯å¦å‘ç”Ÿ</td>
<td>é¦–æ¬¡ç»˜åˆ¶(FP)é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP)</td>
</tr>
<tr>
<td>æ˜¯å¦æœ‰ç”¨</td>
<td>é¦–æ¬¡æœ‰æ•ˆç»˜åˆ¶(FMP)/ä¸»è§’å…ƒç´ è®¡æ—¶</td>
</tr>
<tr>
<td>æ˜¯å¦å¯ç”¨</td>
<td>å¯äº¤äº’äº‹ä»¶(TTI)</td>
</tr>
<tr>
<td>æ˜¯å¦ä»¤äººæ„‰å¿«</td>
<td>è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡(åœ¨æŠ€æœ¯ä¸Šä¸å­˜åœ¨è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡)</td>
</tr>
</tbody>
</table>
<h5 id="å…³é”®æŒ‡æ ‡">å…³é”®æŒ‡æ ‡</h5>
<table>
<thead>
<tr>
<th>æŒ‡æ ‡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>FP(First Paint)</td>
<td>é¡µé¢åœ¨å¯¼èˆªåé¦–æ¬¡å‘ˆç°å‡ºä¸åŒäºå¯¼èˆªå‰å†…å®¹çš„æ—¶é—´ç‚¹</td>
</tr>
<tr>
<td>FCP(First Contentful Paint)</td>
<td>é¦–æ¬¡ç»˜åˆ¶ä»»ä½•æ–‡æœ¬ï¼Œå›¾åƒï¼Œéç©ºç™½canvasæˆ–SVGçš„æ—¶é—´ç‚¹</td>
</tr>
<tr>
<td>TTI(Time to Interactive)</td>
<td>ä»é¡µé¢å¼€å§‹åŠ è½½åˆ°é¡µé¢ä¸»è¦èµ„æºåŠ è½½ä¹‹é—´çš„æ—¶é—´</td>
</tr>
<tr>
<td>LCP(Largest Contentful Paint)</td>
<td>å¯è§†åŒºåŸŸâ€œå†…å®¹â€æœ€å¤§çš„å¯è§å…ƒç´ å¼€å§‹å‡ºç°åœ¨é¡µé¢ä¸Šçš„æ—¶é—´ç‚¹</td>
</tr>
<tr>
<td>CLS(Cumulative Layout Shift)</td>
<td>è¡¨ç¤ºç”¨æˆ·ç»å†çš„æ„å¤– layout åç§»çš„é¢‘ç‡</td>
</tr>
<tr>
<td>TBT(Total Blocking Time)</td>
<td>è¡¨ç¤ºä» FCP åˆ° TTI ä¹‹é—´ï¼Œæ‰€æœ‰ <a href="https://web.dev/custom-metrics/#long-tasks-api">long task</a> çš„é˜»å¡æ—¶é—´ä¹‹å’Œ</td>
</tr>
</tbody>
</table>
<p>FPå’ŒFCPå¯èƒ½æ˜¯ç›¸åŒçš„æ—¶é—´ï¼Œä¹Ÿå¯èƒ½FPå…ˆäºFCPã€‚ä¸‹å›¾å±•ç¤ºäº† FP å’Œ FCP çš„åŒºåˆ«:</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/fanguyun214/picgo/master/img/image-20200724163348918.png" alt="image-20200724163348918" loading="lazy"></figure>
<p>é€šè¿‡ window.performance.getEntriesByType('paint') è·å–ä¸¤ä¸ªæ—¶é—´ç‚¹çš„å€¼ã€‚</p>
<pre><code>performance.getEntriesByType('paint');
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/fanguyun214/picgo/master/img/image-20200724163707377.png" alt="image-20200724163707377" loading="lazy"></figure>
<p>LCPå¯ä»¥é€šè¿‡ Chrome çš„ PerformanceObserver API è®¡ç®—å®ƒ:</p>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/fanguyun214/picgo/master/img/image-20200724163928098.png" alt="image-20200724163928098" loading="lazy"></figure>
<pre><code>// Create a variable to hold the latest LCP value (since it can change).
let lcp;

// Create the PerformanceObserver instance.
const po = new PerformanceObserver((entryList) =&gt; {
  const entries = entryList.getEntries();
  const lastEntry = entries[entries.length - 1];

  // Update `lcp` to the latest value, using `renderTime` if it's available,
  // otherwise using `loadTime`. (Note: `renderTime` may not be available if
  // the element is an image and it's loaded cross-origin without the
  // `Timing-Allow-Origin` header.)
  lcp = lastEntry.renderTime || lastEntry.loadTime;
});

// Observe entries of type `largest-contentful-paint`, including buffered
// entries, i.e. entries that occurred before calling `observe()`.
po.observe({type: 'largest-contentful-paint', buffered: true});

// Send the latest LCP value to your analytics server once the user
// leaves the tab.
addEventListener('visibilitychange', function fn() {
  if (lcp &amp;&amp; document.visibilityState === 'hidden') {
    console.log('LCP:', lcp);
    removeEventListener('visibilitychange', fn, true);
  }
}, true);

</code></pre>
<h5 id="ä¼˜åŒ–-fpfcp">ä¼˜åŒ– FP/FCP</h5>
<p>ä»æ–‡æ¡£çš„ <code>&lt;head&gt;</code> ä¸­ç§»é™¤ä»»ä½•é˜»å¡æ¸²æŸ“çš„è„šæœ¬æˆ–æ ·å¼è¡¨ï¼Œå¯ä»¥å‡å°‘é¦–æ¬¡ç»˜åˆ¶å’Œé¦–æ¬¡å†…å®¹ç»˜åˆ¶å‰çš„ç­‰å¾…æ—¶é—´ã€‚</p>
<p>èŠ±æ—¶é—´ç¡®å®šå‘ç”¨æˆ·æŒ‡å‡ºâ€œæ­£åœ¨å‘ç”Ÿâ€æ‰€éœ€çš„æœ€å°æ ·å¼é›†ï¼Œå¹¶å°†å…¶å†…è”åˆ° <code>&lt;head&gt;</code> ä¸­ï¼ˆæˆ–è€…ä½¿ç”¨ <a href="https://developers.google.com/web/fundamentals/performance/http2#server_push">HTTP/2 æœåŠ¡å™¨æ¨é€</a>)ï¼‰ï¼Œå³å¯å®ç°æçŸ­çš„é¦–æ¬¡ç»˜åˆ¶æ—¶é—´ã€‚</p>
<p><a href="https://developers.google.com/web/updates/2015/11/app-shell">åº”ç”¨ shell æ¨¡å¼</a>å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜å¦‚ä½•é’ˆå¯¹<a href="https://developers.google.com/web/progressive-web-apps">æ¸è¿›å¼ç½‘é¡µåº”ç”¨</a>å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<h5 id="ä¼˜åŒ–-fmptti">ä¼˜åŒ– FMP/TTI</h5>
<p>ç¡®å®šé¡µé¢ä¸Šæœ€å…³é”®çš„ç•Œé¢å…ƒç´ ï¼ˆä¸»è§’å…ƒç´ ï¼‰ä¹‹åï¼Œæ‚¨åº”ç¡®ä¿åˆå§‹è„šæœ¬åŠ è½½ä»…åŒ…å«æ¸²æŸ“è¿™äº›å…ƒç´ å¹¶ä½¿å…¶å¯äº¤äº’æ‰€éœ€çš„ä»£ç ã€‚</p>
<p>åˆå§‹ JavaScript è½¯ä»¶åŒ…ä¸­æ‰€åŒ…å«çš„ä»»ä½•ä¸ä¸»è§’å…ƒç´ æ— å…³çš„ä»£ç éƒ½ä¼šå»¶é•¿å¯äº¤äº’æ—¶é—´ã€‚ æ²¡æœ‰ç†ç”±å¼ºè¿«ç”¨æˆ·è®¾å¤‡ä¸‹è½½å¹¶è§£æå½“å‰ä¸éœ€è¦çš„ JavaScript ä»£ç ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ‚¨åº”è¯¥å°½å¯èƒ½ç¼©çŸ­ FMP ä¸ TTI ä¹‹é—´çš„æ—¶é—´ã€‚ å¦‚æœæ— æ³•æœ€å¤§é™åº¦ç¼©çŸ­æ­¤æ—¶é—´ï¼Œç•Œé¢ç»å¯¹æœ‰å¿…è¦æ˜ç¡®æŒ‡å‡ºé¡µé¢å°šä¸å¯äº¤äº’ã€‚</p>
<p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œå…¶ä¸­ä¸€ç§æœ€ä»¤äººå¤±æœ›çš„ä½“éªŒå°±æ˜¯ç‚¹æŒ‰å…ƒç´ åæ¯«æ— ååº”ã€‚</p>
<h5 id="é¿å…å‡ºç°è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡">é¿å…å‡ºç°è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡</h5>
<p>æ‹†åˆ†ä»£ç å¹¶æŒ‰ç…§ä¼˜å…ˆé¡ºåºæ’åˆ—è¦åŠ è½½çš„ä»£ç ï¼Œä¸ä»…å¯ä»¥ç¼©çŸ­é¡µé¢å¯äº¤äº’æ—¶é—´ï¼Œè¿˜å¯ä»¥å‡å°‘è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ï¼Œç„¶åå³æœ‰å¸Œæœ›å‡å°‘è¾“å…¥å»¶è¿ŸåŠæ…¢é€Ÿå¸§ã€‚</p>
<p>é™¤äº†å°†ä»£ç æ‹†åˆ†ä¸ºå¤šä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯å°†å¤§å‹åŒæ­¥ä»£ç å—æ‹†åˆ†ä¸ºè¾ƒå°çš„å—ï¼Œä»¥ä¾¿ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼Œæˆ–è€…<a href="https://developers.google.com/web/updates/2015/08/using-requestidlecallback">æ¨è¿Ÿåˆ°ä¸‹ä¸€ç©ºé—²ç‚¹</a>ã€‚ ä»¥å¼‚æ­¥æ–¹å¼åœ¨è¾ƒå°çš„å—ä¸­æ‰§è¡Œæ­¤é€»è¾‘ï¼Œå¯åœ¨ä¸»çº¿ç¨‹ä¸­ç•™å‡ºç©ºé—´ï¼Œä¾›æµè§ˆå™¨å“åº”ç”¨æˆ·è¾“å…¥ã€‚</p>
<p>æœ€åï¼Œæ‚¨åº”ç¡®ä¿æµ‹è¯•ç¬¬ä¸‰æ–¹ä»£ç ï¼Œå¹¶å¯¹ä»»ä½•ä½é€Ÿè¿è¡Œçš„ä»£ç è¿½è´£ã€‚ äº§ç”Ÿå¤§é‡è€—æ—¶è¾ƒé•¿ä»»åŠ¡çš„ç¬¬ä¸‰æ–¹å¹¿å‘Šæˆ–è·Ÿè¸ªè„šæœ¬å¯¹æ‚¨ä¸šåŠ¡çš„ä¼¤å®³å¤§äºå¸®åŠ©ã€‚</p>
<h3 id="æ•°æ®ä¸ŠæŠ¥">æ•°æ®ä¸ŠæŠ¥</h3>
<h4 id="ä½¿ç”¨çš„imgæ ‡ç­¾getè¯·æ±‚">ä½¿ç”¨çš„imgæ ‡ç­¾getè¯·æ±‚</h4>
<ul>
<li>ä¸å­˜åœ¨AJAXè·¨åŸŸé—®é¢˜ï¼Œå¯åšè·¨æºçš„è¯·æ±‚</li>
<li>å¾ˆå¤è€çš„æ ‡ç­¾ï¼Œæ²¡æœ‰æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜</li>
</ul>
<pre><code>var i = new Image();
i.onload = i.onerror = i.onabort = function () {
  i = i.onload = i.onerror = i.onabort = null;
}
i.src = url;
</code></pre>
<h4 id="navigatorsendbeacon">navigator.sendBeacon</h4>
<p>å¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ navigator.sendBeaconæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥å‘é€ä¸€äº›ç»Ÿè®¡å’Œè¯Šæ–­çš„å°é‡æ•°æ®ï¼Œç‰¹åˆ«é€‚åˆä¸ŠæŠ¥ç»Ÿè®¡çš„åœºæ™¯ã€‚</p>
<ul>
<li>æ•°æ®å¯é ï¼Œæµè§ˆå™¨å…³é—­è¯·æ±‚ä¹Ÿç…§æ ·èƒ½å‘</li>
<li>å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šå½±å“ä¸‹ä¸€é¡µé¢çš„åŠ è½½</li>
<li>APIä½¿ç”¨ç®€å•</li>
</ul>
<pre><code>window.addEventListener('unload', logData, false);

function logData() {
    navigator.sendBeacon(&quot;/log&quot;, analyticsData);
}
</code></pre>
<p>å½“æµè§ˆå™¨æ”¯æŒsendBeaconæ–¹æ³•ï¼Œä¼˜å…ˆä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä½¿ç”¨imgæ–¹å¼é™çº§ä¸ŠæŠ¥ã€‚</p>
<h3 id="å‚è€ƒ">å‚è€ƒ</h3>
<ul>
<li>
<p><a href="https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics#%E4%BB%A5%E7%94%A8%E6%88%B7%E4%B8%BA%E4%B8%AD%E5%BF%83%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87_2">ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æŒ‡æ ‡</a></p>
</li>
<li>
<p><a href="https://juejin.im/post/5ecc5521e51d45788e17dcc6">è§£è¯»æ–°ä¸€ä»£ Web æ€§èƒ½ä½“éªŒå’Œè´¨é‡æŒ‡æ ‡</a></p>
</li>
</ul>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://fanguyun214.github.io/post/ngrx-shi-yong/" class="post-title gt-a-link">
                    NgRxä½¿ç”¨
                </a>
            </div>
        

        

        
            
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
<script>
    // md5.min.js
    !function(n){
        "use strict";
        function d(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}
        function f(n,t,r,e,o,u){return d((c=d(d(t,n),d(e,u)))<<(f=o)|c>>>32-f,r);var c,f}
        function l(n,t,r,e,o,u,c){return f(t&r|~t&e,n,t,o,u,c)}
        function v(n,t,r,e,o,u,c){return f(t&e|r&~e,n,t,o,u,c)}
        function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}
        function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}
        function i(n,t){var r,e,o,u,c;n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;var f=1732584193,i=-271733879,a=-1732584194,h=271733878;for(r=0;r<n.length;r+=16)f=l(e=f,o=i,u=a,c=h,n[r],7,-680876936),h=l(h,f,i,a,n[r+1],12,-389564586),a=l(a,h,f,i,n[r+2],17,606105819),i=l(i,a,h,f,n[r+3],22,-1044525330),f=l(f,i,a,h,n[r+4],7,-176418897),h=l(h,f,i,a,n[r+5],12,1200080426),a=l(a,h,f,i,n[r+6],17,-1473231341),i=l(i,a,h,f,n[r+7],22,-45705983),f=l(f,i,a,h,n[r+8],7,1770035416),h=l(h,f,i,a,n[r+9],12,-1958414417),a=l(a,h,f,i,n[r+10],17,-42063),i=l(i,a,h,f,n[r+11],22,-1990404162),f=l(f,i,a,h,n[r+12],7,1804603682),h=l(h,f,i,a,n[r+13],12,-40341101),a=l(a,h,f,i,n[r+14],17,-1502002290),f=v(f,i=l(i,a,h,f,n[r+15],22,1236535329),a,h,n[r+1],5,-165796510),h=v(h,f,i,a,n[r+6],9,-1069501632),a=v(a,h,f,i,n[r+11],14,643717713),i=v(i,a,h,f,n[r],20,-373897302),f=v(f,i,a,h,n[r+5],5,-701558691),h=v(h,f,i,a,n[r+10],9,38016083),a=v(a,h,f,i,n[r+15],14,-660478335),i=v(i,a,h,f,n[r+4],20,-405537848),f=v(f,i,a,h,n[r+9],5,568446438),h=v(h,f,i,a,n[r+14],9,-1019803690),a=v(a,h,f,i,n[r+3],14,-187363961),i=v(i,a,h,f,n[r+8],20,1163531501),f=v(f,i,a,h,n[r+13],5,-1444681467),h=v(h,f,i,a,n[r+2],9,-51403784),a=v(a,h,f,i,n[r+7],14,1735328473),f=g(f,i=v(i,a,h,f,n[r+12],20,-1926607734),a,h,n[r+5],4,-378558),h=g(h,f,i,a,n[r+8],11,-2022574463),a=g(a,h,f,i,n[r+11],16,1839030562),i=g(i,a,h,f,n[r+14],23,-35309556),f=g(f,i,a,h,n[r+1],4,-1530992060),h=g(h,f,i,a,n[r+4],11,1272893353),a=g(a,h,f,i,n[r+7],16,-155497632),i=g(i,a,h,f,n[r+10],23,-1094730640),f=g(f,i,a,h,n[r+13],4,681279174),h=g(h,f,i,a,n[r],11,-358537222),a=g(a,h,f,i,n[r+3],16,-722521979),i=g(i,a,h,f,n[r+6],23,76029189),f=g(f,i,a,h,n[r+9],4,-640364487),h=g(h,f,i,a,n[r+12],11,-421815835),a=g(a,h,f,i,n[r+15],16,530742520),f=m(f,i=g(i,a,h,f,n[r+2],23,-995338651),a,h,n[r],6,-198630844),h=m(h,f,i,a,n[r+7],10,1126891415),a=m(a,h,f,i,n[r+14],15,-1416354905),i=m(i,a,h,f,n[r+5],21,-57434055),f=m(f,i,a,h,n[r+12],6,1700485571),h=m(h,f,i,a,n[r+3],10,-1894986606),a=m(a,h,f,i,n[r+10],15,-1051523),i=m(i,a,h,f,n[r+1],21,-2054922799),f=m(f,i,a,h,n[r+8],6,1873313359),h=m(h,f,i,a,n[r+15],10,-30611744),a=m(a,h,f,i,n[r+6],15,-1560198380),i=m(i,a,h,f,n[r+13],21,1309151649),f=m(f,i,a,h,n[r+4],6,-145523070),h=m(h,f,i,a,n[r+11],10,-1120210379),a=m(a,h,f,i,n[r+2],15,718787259),i=m(i,a,h,f,n[r+9],21,-343485551),f=d(f,e),i=d(i,o),a=d(a,u),h=d(h,c);return[f,i,a,h]}
        function a(n){var t,r="",e=32*n.length;for(t=0;t<e;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}
        function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var e=8*n.length;for(t=0;t<e;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}
        function e(n){var t,r,e="0123456789abcdef",o="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}
        function r(n){return unescape(encodeURIComponent(n))}
        function o(n){return a(i(h(t=r(n)),8*t.length));var t}
        function u(n,t){return function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}(r(n),r(t))}
        function t(n,t,r){return t?r?u(t,n):e(u(t,n)):r?o(n):e(o(n))}
        "function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.md5=t;
    }(this);
</script>


<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '94fca913faabe61337e0',
    clientSecret: '9ee8a359f64b424f77e6fba28063b59788b92af1',
    repo: 'fanguyun214.github.io',
    owner: 'fanguyun214',
    admin: ['fanguyun214'],
    id: md5(location.pathname),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false       // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

            

            
        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">âŒ¨ï¸ æ ¼ç‰©ã€è‡´çŸ¥ã€è¯šæ„  ğŸ‰<br/>
âŒ¨ï¸ æ­£å¿ƒã€ä¿®èº«ã€é½å®¶  ğŸ‰</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by Jasonfan & Grider  ğŸ–¥
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://fanguyun214.github.io/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
